const hamburger=document.querySelector(".hamburger"),navLinks=document.querySelector(".nav-links"),filterButtons=document.querySelectorAll(".filter-btn"),dishCards=document.querySelectorAll(".dish-card"),testimonialDots=document.querySelectorAll(".dot"),testimonials=document.querySelectorAll(".testimonial"),addToCartButtons=document.querySelectorAll(".add-to-cart"),cartCountElement=document.querySelector(".cart-count"),viewMoreBtn=document.querySelector(".view-more-btn"),dishesGrid=document.querySelector(".dishes-grid"),allDishesModal=document.getElementById("allDishesModal"),closeModalBtn=allDishesModal.querySelector(".close-modal"),dishesGridModal=allDishesModal.querySelector(".dishes-grid-modal");let cart=JSON.parse(localStorage.getItem("plutoCart"))||[];updateCartCount(),hamburger.addEventListener("click",(()=>{navLinks.classList.toggle("show"),document.body.classList.toggle("menu-open"),hamburger.classList.toggle("active"),hamburger.classList.contains("active")?(hamburger.innerHTML="<span></span><span></span><span></span>",hamburger.querySelectorAll("span").forEach(((e,t)=>{0===t&&(e.style.transform="rotate(45deg) translate(5px, 5px)"),1===t&&(e.style.opacity="0"),2===t&&(e.style.transform="rotate(-45deg) translate(5px, -5px)")}))):(hamburger.innerHTML="<span></span><span></span><span></span>",hamburger.querySelectorAll("span").forEach((e=>{e.style.transform="none",e.style.opacity="1"})))})),navLinks.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(()=>{window.innerWidth<=768&&(navLinks.classList.remove("show"),hamburger.classList.remove("active"),document.body.classList.remove("menu-open"),hamburger.innerHTML="<span></span><span></span><span></span>",hamburger.querySelectorAll("span").forEach((e=>{e.style.transform="none",e.style.opacity="1"})))}))})),testimonialDots.forEach(((e,t)=>{e.addEventListener("click",(()=>{testimonialDots.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),showTestimonial(t)}))}));let currentTestimonial=0;const testimonialInterval=setInterval((()=>{currentTestimonial=(currentTestimonial+1)%testimonials.length,showTestimonial(currentTestimonial)}),5e3);function showTestimonial(e){testimonialDots.forEach(((t,n)=>{n===e?t.classList.add("active"):t.classList.remove("active")})),document.querySelector(".testimonials-slider").style.transform=`translateX(-${100*e}%)`}function addToCart(e){const t=cart.findIndex((t=>t.name===e.name));t>-1?cart[t].quantity++:cart.push(e),localStorage.setItem("plutoCart",JSON.stringify(cart)),updateCartCount()}function updateCartCount(){const e=cart.reduce(((e,t)=>e+t.quantity),0);cartCountElement.textContent=e,cartCountElement.classList.add("pulse"),setTimeout((()=>{cartCountElement.classList.remove("pulse")}),300)}function showAddedToCartMessage(e){const t=document.createElement("div");t.className="toast-message",t.innerHTML=`\n        <i class="fas fa-check-circle"></i>\n        <p>${e} added to cart!</p>\n    `,document.body.appendChild(t),setTimeout((()=>{t.classList.add("active")}),10),setTimeout((()=>{t.classList.remove("active"),setTimeout((()=>{t.remove()}),300)}),3e3)}function scrollToSection(e){const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})}document.querySelectorAll(".add-to-cart").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.closest(".dish-card"),n=t.querySelector("h3").textContent,a=t.querySelector(".price").textContent,s=t.querySelector("img").src;addToCart({id:Date.now(),name:n,price:a,image:s,quantity:1}),showAddedToCartMessage(n)}))})),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();scrollToSection(this.getAttribute("href").substring(1))}))}));const sections=document.querySelectorAll("section[id]"),navItems=document.querySelectorAll(".nav-links a");window.addEventListener("scroll",(()=>{let e="";sections.forEach((t=>{const n=t.offsetTop;pageYOffset>=n-60&&(e=t.getAttribute("id"))})),navItems.forEach((t=>{t.classList.remove("active"),t.getAttribute("href").slice(1)===e&&t.classList.add("active")}))}));const animateOnScroll=()=>{document.querySelectorAll(".category-card, .dish-card, .step, .hero-content, .hero-image, .app-content, .app-image, .offers-content, .offers-image").forEach((e=>{e.getBoundingClientRect().top<window.innerHeight/1.3&&e.classList.add("animate")}))};document.addEventListener("DOMContentLoaded",(()=>{document.body.classList.add("loaded"),setTimeout(animateOnScroll,100)})),window.addEventListener("scroll",animateOnScroll),window.addEventListener("load",(()=>{document.querySelector("header").classList.add("loaded");document.querySelectorAll(".hero-content, .hero-image").forEach((e=>e.classList.add("animate")))}));const style=document.createElement("style");style.textContent="\n    .toast-message {\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        background-color: #fff;\n        color: var(--dark-color);\n        padding: 15px 25px;\n        border-radius: 10px;\n        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        transform: translateY(100px);\n        opacity: 0;\n        transition: all 0.3s ease;\n        z-index: 1000;\n    }\n\n    .toast-message.active {\n        transform: translateY(0);\n        opacity: 1;\n    }\n\n    .toast-message i {\n        color: var(--success-color);\n        font-size: 1.5rem;\n    }\n\n    .pulse {\n        animation: pulse 0.3s ease-in-out;\n    }\n\n    @keyframes pulse {\n        0% { transform: scale(1); }\n        50% { transform: scale(1.3); }\n        100% { transform: scale(1); }\n    }\n\n    .animate {\n        animation: fadeInUp 0.8s ease-out forwards;\n    }\n\n    @keyframes fadeInUp {\n        from {\n            opacity: 0;\n            transform: translateY(30px);\n        }\n        to {\n            opacity: 1;\n            transform: translateY(0);\n        }\n    }\n\n    body.loaded .hero-content,\n    body.loaded .hero-image {\n        animation: fadeInUp 0.8s ease-out forwards;\n    }\n",document.head.appendChild(style),document.addEventListener("DOMContentLoaded",(function(){"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("js/sw.js").then((e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)})).catch((e=>{console.log("ServiceWorker registration failed: ",e)}))}));const e=JSON.parse(localStorage.getItem("user")),t=document.getElementById("signUpBtn"),n=document.getElementById("logoutBtn"),a=document.getElementById("userNameDisplay");if(e){t.style.display="none",n.style.display="inline-block",a.style.display="inline-block";const s=e.name.split(" "),o=(s[0][0]+s[s.length-1][0]).toUpperCase();a.textContent=o,a.style.marginLeft="10px"}else t.style.display="inline-block",n.style.display="none",a.style.display="none";n.addEventListener("click",(function(){localStorage.removeItem("user"),localStorage.removeItem("token"),window.location.href="login.html"})),document.getElementById("viewMenuBtn").addEventListener("click",(function(){document.getElementById("categories").scrollIntoView({behavior:"smooth"})}));const s=document.querySelectorAll(".category-btn"),o=document.querySelectorAll(".category-section");function r(){dishesGridModal.innerHTML="",dishCards.forEach((e=>{const t=function(e){const t=document.createElement("div");return t.className="dish-card-modal",t.innerHTML=`\n            <div class="dish-image-modal">\n                <img src="${e.querySelector("img").src}" alt="${e.querySelector("h3").textContent}">\n                <span class="rating">${e.querySelector(".rating").innerHTML}</span>\n            </div>\n            <div class="dish-content-modal">\n                <h3>${e.querySelector("h3").textContent}</h3>\n                <p>${e.querySelector("p").textContent}</p>\n                <div class="dish-footer-modal">\n                    <span class="price">${e.querySelector(".price").textContent}</span>\n                    <button class="add-to-cart" data-item-id="${e.querySelector(".add-to-cart").dataset.itemId}" \n                            data-item-name="${e.querySelector(".add-to-cart").dataset.itemName}" \n                            data-item-price="${e.querySelector(".add-to-cart").dataset.itemPrice}">\n                        <i class="fas fa-plus"></i>\n                    </button>\n                </div>\n            </div>\n        `,t}(e);dishesGridModal.appendChild(t)}))}s.forEach((e=>{e.addEventListener("click",(function(){s.forEach((e=>e.classList.remove("active"))),o.forEach((e=>e.classList.remove("active"))),this.classList.add("active");const e=this.getAttribute("data-category");document.getElementById(e).classList.add("active")}))})),viewMoreBtn&&viewMoreBtn.addEventListener("click",(()=>{r(),allDishesModal.classList.add("active"),document.body.style.overflow="hidden"})),closeModalBtn.addEventListener("click",(()=>{allDishesModal.classList.remove("active"),document.body.style.overflow=""})),allDishesModal.addEventListener("click",(e=>{e.target===allDishesModal&&(allDishesModal.classList.remove("active"),document.body.style.overflow="")})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&allDishesModal.classList.contains("active")&&(allDishesModal.classList.remove("active"),document.body.style.overflow="")})),filterButtons.forEach((e=>{e.addEventListener("click",(()=>{filterButtons.forEach((e=>e.classList.remove("active"))),e.classList.add("active");const t=e.getAttribute("data-filter");dishCards.forEach((e=>{"all"===t||e.getAttribute("data-category")===t?e.style.display="block":e.style.display="none"})),viewMoreBtn&&(viewMoreBtn.style.display="block")}))}))}));